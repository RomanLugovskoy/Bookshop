(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var o=t.g.document;if(!e&&o&&(o.currentScript&&"SCRIPT"===o.currentScript.tagName.toUpperCase()&&(e=o.currentScript.src),!e)){var n=o.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=[{img:"images/banner.jpg",alt:"Black friday sale"},{img:"images/banner2.jpg",alt:"Top 10 books for entrepreneurs"},{img:"images/banner3.jpg",alt:"Cozy books selection"}],o=document.querySelector(".slider-img"),n=document.querySelectorAll(".controlls-dot");let r,a=0;const i=t=>{t>=e.length?t=0:t<0&&(t=e.length-1),n.forEach((t=>t.classList.remove("dot_active"))),n[t].classList.add("dot_active"),o.classList.add("fade-out"),setTimeout((()=>{o.src=e[t].img,o.alt=e[t].alt,o.classList.remove("fade-out")}),500),a=t},s=()=>{r=setInterval((()=>{i(a+1)}),5e3)};n.forEach(((t,e)=>{t.addEventListener("click",(()=>{clearInterval(r),i(e),s()}))})),document.addEventListener("DOMContentLoaded",(()=>{i(a),s()}));const c=document.querySelectorAll(".header__item");function l(){const t=JSON.parse(localStorage.getItem("bag"))||[],e=document.getElementById("bag-count");e?(e.textContent=t.length,e.style.display=t.length>0?"block":"none"):console.error('Element with id "bag-count" not found.')}function d(){const t=JSON.parse(localStorage.getItem("bag"))||[];document.querySelectorAll(".bookItem").forEach((e=>{const o=e.dataset.id,n=e.querySelector("button.book-btn, button.book-btn-in-cart");n?t.some((t=>t.id===o))?(n.textContent="In the Cart",n.classList.add("book-btn-in-cart"),n.classList.remove("book-btn")):(n.textContent="Buy Now",n.classList.add("book-btn"),n.classList.remove("book-btn-in-cart")):console.error("Button not found for book item:",e)}))}document.addEventListener("DOMContentLoaded",(()=>{c.forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault(),c.forEach((t=>t.classList.remove("header__item_active"))),this.classList.add("header__item_active")}))}))})),document.addEventListener("click",(t=>{if(t.target.classList.contains("book-btn")||t.target.classList.contains("book-btn-in-cart")){t.preventDefault();const e=t.target.closest(".bookItem");e?function(t){let e=JSON.parse(localStorage.getItem("bag"))||[];const o=e.findIndex((e=>e.id===t.id));-1!==o?(e.splice(o,1),d()):(e.push(t),d()),localStorage.setItem("bag",JSON.stringify(e)),l(),d()}({id:e.dataset.id,title:e.querySelector(".book-title")?e.querySelector(".book-title").textContent:"No Title",authors:e.querySelector(".book-authors")?e.querySelector(".book-authors").textContent:"No Authors",price:e.querySelector(".book-retailPrice")?e.querySelector(".book-retailPrice").textContent:"No Price"}):console.error("Book item not found.")}})),document.addEventListener("DOMContentLoaded",(()=>{l(),d()})),t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p;let u=0,m="Architecture";function b(t,e=0){return fetch(`https://www.googleapis.com/books/v1/volumes?q="subject:${t}"&key=AIzaSyDS9LddDu7ygGLgEseQLS2giA2TL3o5dbA&printType=books&startIndex=${e}&maxResults=6&langRestrict=en`).then((t=>t.json())).then((t=>t.items||[]))}function g(t){const e=document.getElementById("bookList"),o=document.createElement("li");o.className="bookItem",o.dataset.id=t.id;const n=t.volumeInfo.imageLinks?t.volumeInfo.imageLinks.thumbnail:"img/cover/no-cover.jpg",r=t.volumeInfo.authors?t.volumeInfo.authors.join(", "):"Unknown author",a=t.volumeInfo.title||"No title available",i=t.volumeInfo.description?function(t){return t.length>80?t.substring(0,80)+"...":t}(t.volumeInfo.description):"No description available",s=t.volumeInfo.averageRating,c=t.volumeInfo.ratingsCount,l=t.saleInfo.retailPrice?`${t.saleInfo.retailPrice.amount} ${t.saleInfo.retailPrice.currencyCode}`:null,u="FOR_SALE"===t.saleInfo.saleability,m=`buy-button-${t.id}`;o.innerHTML=`\n        <div class="book-img">\n            <img class="shadow" src="${n}" alt="${a}" height="300">\n        </div>\n        <div class="book-info">\n            <p class="book-authors">${r}</p>\n            <p class="book-title">${a}</p>\n            ${s?`<div class="book-rating">\n                ${function(t){let e="";for(let o=1;o<=5;o++)e+=`<span class="star ${o<=t?"active":""}">&#9733;</span>`;return e}(s)}\n                <p class="book-ratingsCount">${c} reviews</p>\n            </div>`:""}\n            <p class="book-description">${i}</p>\n            ${l?`<p class="book-retailPrice">${l}</p>`:""}\n            <button id="${m}" class="book-btn base-btn ${u?"":"book-btn-out-of-stock"}">${u?"Buy Now":"Out of Stock"}</button>\n        </div>\n    `,e.appendChild(o),u&&d(t.id)}document.getElementById("loadMoreBtn").addEventListener("click",(()=>{u+=6,b(m,u).then((t=>{t.forEach((t=>g(t)))}))})),document.addEventListener("DOMContentLoaded",(()=>{b(m).then((t=>{t.forEach((t=>g(t)))}))})),document.querySelectorAll(".sidebar__item").forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault(),document.querySelectorAll(".sidebar__item").forEach((t=>t.classList.remove("sidebar__item-active"))),this.classList.add("sidebar__item-active"),m=this.textContent,u=0,document.getElementById("bookList").innerHTML="",b(m).then((t=>{t.forEach((t=>g(t)))}))}))}))})();